{% extends "base.html" %}

{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'services/css/video_style.css' %}">
{% endblock %}

{% block page_header %}
<div class="container" style="margin-top: 70px !important;">
    <div class="row"> 
        <div class="col-sm-12">
            <div class="card text-center">
                <div class="card-header" {% include 'includes/theme.html' %}></div>
                    <h1 class="text-uppercase bg-dark mb-0">
                        {% if request.user.is_superuser %}
                            <div class="col m-2">   
                                <a href="{% url 'add_video' %}"class="btn m-1" d {% include 'includes/theme.html' %}>
                                <i class="fas fa-plus"></i>  Add A Video
                                </a>                             
                            </div>
                        {% endif %}
                        <strong class="text-white">Video Services</strong>
                    </h1>
                <div class="card-header" {% include 'includes/theme.html' %}></div>
            </div>                    
        </div>
    </div>
</div>
{% endblock %}
{% block content %}  
<div class="container">
    <div class="jumbotron jumbotron-fluid bg-dark text-light p-3 rounded">
        <div class="container">             
            <div class="card-body">            
                <div class="col-sm-12 col-md-12 col-lg-12 mb-4 px-5">                    
                    <div class="embed-responsive px-5">
                        <div class="text m-0 p-0">                         
                            <p class="m-0 p-0" style="float: right;">{{ title_video.date }}</p>
                            <p class="text-uppercase text-white m-0 p-0">                                
                                {% if request.user.is_superuser %}
                                    <div class="btn-group" role="group" aria-label="Basic example">
                                        <a href="{% url 'edit_video' title_video.id  %}"  class="btn btn-sm btn btn-light">
                                            <small><i class="fas fa-user-edit"></i></small>
                                        </a>
                                        {% if title_video.pinned %}
                                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delteEventModal" disabled>
                                            <small><i class="fas fa-trash-alt"></i></small>
                                        </button>  
                                        {% else %} 
                                        <!-- Button trigger modal -->
                                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
                                            <small><i class="fas fa-trash-alt"></i></small>
                                        </button>
                                        <!-- Delete Modal -->
                                            <div class="modal fade" id="deleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title text-dark" id="deleteModalLabel">Deleting Video</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body text-dark">
                                                    Are you sure you want to delete this video.
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                    <a href="{% url 'del_video' title_video.id  %}" class="btn btn-danger">
                                                        <small><i class="fas fa-trash-alt"></i></small>
                                                    </a> 
                                                </div>
                                                </div>
                                            </div>
                                            </div>
                                        {% endif %}                
                                    </div>
                                {% endif %} 
                                {{ title_video.title }}
                            </p>                        
                            <p class="text-uppercase text-white lead m-0 p-0">{{ title_video.main_paragraph }}</p>
                        </div>                    
                        <iframe 
                            width="100%" height="450" src="{{ title_video.video  }}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-1">    
    <div class="row">
        {% for item in videos %}
           
        <div class="col-sm-4 p-5">
             
            <div class="card mb-3 p5 border-0 bg-dark text-light">
                {% if request.user.is_superuser %}
                    {% if item.pinned %}
                    <span>
                        <small class="text-success"><i class="mt-1 fas fa-thumbtack m-2"></i>This video is pinned to show as main video.</small>
                    </span>                  
                    {% else %}                        
                        <a href="{% url 'pin_video' item.id %}" class="text-white p-1">
                            <small class=""><i class="mt-1 fas fa-thumbtack m-2"></i>Pin this video to show as main video.</small>
                        </a>
                    {% endif %}
                        
                {% endif %}
                <img src="{{ item.video_image.url}}" class="card-img-top p-2" alt="..." style="height:200px !important;" >
                <div class="card-body">
                    <h5 class="card-title">
                        {{ item.title }}
                        {% if request.user.is_superuser %}
                            <div class="btn-group" role="group" aria-label="Basic example">
                                <a href="{% url 'edit_video' item.id  %}"  class="btn btn-sm btn btn-light">
                                    <small><i class="fas fa-user-edit"></i></small>
                                </a>
                                
                                {% if item.pinned %}
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delteEventModal" disabled>
                                        <small><i class="fas fa-trash-alt"></i></small>
                                    </button>  
                                    {% else %} 
                                    <!--Delete Modal trigger Button-->
                                     <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete{{ item.id }}Modal">
                                            <small><i class="fas fa-trash-alt"></i></small>
                                    </button> 
                                    <!-- Delete Modal -->
                                    <div class="modal fade" id="delete{{ item.id }}Modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="delete{{ item.id }}ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title text-dark" id="delete{{ item.id }}ModalLabel">Deleting Video{{ item.id }}</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body text-dark">
                                            Are you sure you want to delete this video.
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            <a href="{% url 'del_video' item.id  %}" class="btn btn-danger">
                                                <small><i class="fas fa-trash-alt"></i></small>
                                            </a> 
                                        </div>
                                        </div>
                                    </div>
                                    </div>
                                {% endif %}                         
                            </div>
                        {% endif %}                          
                    </h5>
                    <p class="card-text">{{ item.main_paragraph }}</p>
                    <p class="card-text"><small class="text-muted">{{ item.date }}</small></p>
                </div>
                <div class="card-footer">
                    <a href="{% url 'play_video' item.id %}" class="btn btn-sm" {% include 'includes/theme.html' %}> Watch this Video</a>
                </div>
                </div>
        </div>
         

        {% endfor %}
    </div>
</div>

{% endblock %}

{% block postloadjs %}

   
{% endblock %}